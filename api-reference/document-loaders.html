<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡æ¡£åŠ è½½å™¨ API - LangChain 1.0</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="chapter-api-document-loaders">
    <button class="theme-toggle">ğŸŒ“</button>
    <button class="mobile-menu-btn" onclick="toggleSidebar()">â˜°</button>

    <div class="app-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>LangChain 1.0</h1>
                <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 5px;">API å‚è€ƒ</p>
            </div>
            <div class="sidebar-nav"></div>
        </nav>

        <main class="main-content">
            <div class="content">
                <h1>æ–‡æ¡£åŠ è½½å™¨ API</h1>
                <p class="subtitle">BaseLoader ä¸æ–‡æ¡£åŠ è½½</p>

                <div class="api-nav">
                    <a href="#overview" class="api-nav-link">æ¦‚è¿°</a>
                    <a href="#base" class="api-nav-link">åŸºç±»</a>
                    <a href="#loaders" class="api-nav-link">å¸¸ç”¨åŠ è½½å™¨</a>
                    <a href="#examples" class="api-nav-link">ç¤ºä¾‹</a>
                </div>

                <h2 id="overview">æ¦‚è¿°</h2>
                <p>æ–‡æ¡£åŠ è½½å™¨è´Ÿè´£ä»å„ç§æ•°æ®æºåŠ è½½æ–‡æ¡£å†…å®¹ï¼Œè½¬æ¢ä¸º LangChain å¯ä½¿ç”¨çš„ Document å¯¹è±¡ã€‚</p>

                <pre class="mermaid">graph TD
                    A[BaseLoader] --> B[TextLoader]
                    A --> C[PyPDFLoader]
                    A --> D[WebBaseLoader]
                    A --> E[DirectoryLoader]
                    A --> F[JSONLoader]

                    B --> G[Document]
                    C --> G
                    D --> G
                    E --> G
                    F --> G

                    style A fill:#e1f5fe
                    style G fill:#c8e6c9</code></pre>

                <h2 id="base">åŸºç±»</h2>

                <div class="api-section">
                    <h3 class="api-title">BaseLoader</h3>
                    <p class="api-description">æ‰€æœ‰æ–‡æ¡£åŠ è½½å™¨çš„æŠ½è±¡åŸºç±»ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain_core.document_loaders import BaseLoader

class BaseLoader(ABC):
    """æ–‡æ¡£åŠ è½½å™¨åŸºç±»"""

    @abstractmethod
    def load(self) -> List[Document]:
        """
        åŠ è½½æ–‡æ¡£

        Returns:
            Document å¯¹è±¡åˆ—è¡¨
        """

    def load_and_split(
        self,
        text_splitter: Optional[TextSplitter] = None,
    ) -> List[Document]:
        """
        åŠ è½½å¹¶åˆ†å‰²æ–‡æ¡£

        Args:
            text_splitter: æ–‡æœ¬åˆ†å‰²å™¨

        Returns:
            åˆ†å‰²åçš„ Document åˆ—è¡¨
        """

    async def aload(self) -> List[Document]:
        """å¼‚æ­¥åŠ è½½æ–‡æ¡£"""
        return await asyncio.to_thread(self.load)

    def lazy_load(self) -> Iterator[Document]:
        """
        æ‡’åŠ è½½æ–‡æ¡£

        Yields:
            Document å¯¹è±¡
        """

    async def alazy_load(self) -> AsyncIterator[Document]:
        """
        å¼‚æ­¥æ‡’åŠ è½½

        Yields:
            Document å¯¹è±¡
        """</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">Document</h3>
                    <p class="api-description">æ–‡æ¡£å¯¹è±¡ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain_core.documents import Document

class Document(Serializable):
    """æ–‡æ¡£å¯¹è±¡"""

    page_content: str
    """æ–‡æ¡£å†…å®¹"""

    metadata: Dict[str, Any] = {}
    """å…ƒæ•°æ®å­—å…¸"""

    type: Literal["Document"] = "Document"
    """ç±»å‹æ ‡è¯†"""

    def __init__(
        self,
        page_content: str,
        metadata: Optional[Dict[str, Any]] = None,
        **kwargs: Any,
    ):
        """
        åˆå§‹åŒ–æ–‡æ¡£

        Args:
            page_content: æ–‡æ¡£å†…å®¹
            metadata: å…ƒæ•°æ®
            **kwargs: é¢å¤–å‚æ•°
        """

    def to_json(self) -> str:
        """è½¬æ¢ä¸º JSON"""

    @classmethod
    def from_json(cls, json_str: str) -> "Document":
        """ä» JSON åˆ›å»ºæ–‡æ¡£"""</code></pre>
                    </div>
                </div>

                <h2 id="loaders">å¸¸ç”¨åŠ è½½å™¨</h2>

                <div class="api-section">
                    <h3 class="api-title">TextLoader</h3>
                    <p class="api-description">åŠ è½½æ–‡æœ¬æ–‡ä»¶ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain_community.document_loaders import TextLoader

class TextLoader(BaseLoader):
    """æ–‡æœ¬æ–‡ä»¶åŠ è½½å™¨"""

    def __init__(
        self,
        file_path: str,
        encoding: Optional[str] = None,
        autodetect_encoding: bool = False,
    ):
        """
        åˆå§‹åŒ–

        Args:
            file_path: æ–‡ä»¶è·¯å¾„
            encoding: æ–‡ä»¶ç¼–ç 
            autodetect_encoding: æ˜¯å¦è‡ªåŠ¨æ£€æµ‹ç¼–ç 
        """

    def load(self) -> List[Document]:
        """åŠ è½½æ–‡æœ¬æ–‡ä»¶"""</code></pre>
                    </div>

                    <h4>ä½¿ç”¨ç¤ºä¾‹</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import TextLoader

# åŠ è½½å•ä¸ªæ–‡ä»¶
loader = TextLoader("example.txt")
documents = loader.load()

# è‡ªåŠ¨æ£€æµ‹ç¼–ç 
loader = TextLoader("example.txt", autodetect_encoding=True)

# æŒ‡å®šç¼–ç 
loader = TextLoader("example.txt", encoding="utf-8")</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">PyPDFLoader</h3>
                    <p class="api-description">åŠ è½½ PDF æ–‡ä»¶ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain_community.document_loaders import PyPDFLoader

class PyPDFLoader(BaseLoader):
    """PDF æ–‡ä»¶åŠ è½½å™¨"""

    def __init__(
        self,
        file_path: str,
        password: Optional[str] = None,
        extract_images: bool = False,
    ):
        """
        åˆå§‹åŒ–

        Args:
            file_path: PDF æ–‡ä»¶è·¯å¾„
            password: PDF å¯†ç ï¼ˆå¦‚æœ‰ï¼‰
            extract_images: æ˜¯å¦æå–å›¾ç‰‡
        """

    def load(self) -> List[Document]:
        """åŠ è½½ PDFï¼ˆæ¯é¡µä¸€ä¸ª Documentï¼‰"""</code></pre>
                    </div>

                    <h4>ä½¿ç”¨ç¤ºä¾‹</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import PyPDFLoader

# åŸºç¡€ä½¿ç”¨
loader = PyPDFLoader("document.pdf")
pages = loader.load()

# å¸¦å¯†ç 
loader = PyPDFLoader("document.pdf", password="secret")

# æå–å›¾ç‰‡
loader = PyPDFLoader("document.pdf", extract_images=True)

# æŸ¥çœ‹é¡µæ•°
print(f"æ€»é¡µæ•°: {len(pages)}")
print(f"ç¬¬ä¸€é¡µ: {pages[0].page_content[:100]}")</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">WebBaseLoader</h3>
                    <p class="api-description">åŠ è½½ç½‘é¡µå†…å®¹ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain_community.document_loaders import WebBaseLoader

class WebBaseLoader(BaseLoader):
    """ç½‘é¡µåŠ è½½å™¨"""

    def __init__(
        self,
        web_path: Union[str, List[str]],
        header_template: Optional[Dict[str, str]] = None,
        verify_ssl: bool = True,
        requests_per_second: Optional[int] = None,
        continue_on_failure: bool = False,
    ):
        """
        åˆå§‹åŒ–

        Args:
            web_path: URL æˆ– URL åˆ—è¡¨
            header_template: HTTP è¯·æ±‚å¤´
            verify_ssl: æ˜¯å¦éªŒè¯ SSL
            requests_per_second: è¯·æ±‚é€Ÿç‡é™åˆ¶
            continue_on_failure: å¤±è´¥æ—¶æ˜¯å¦ç»§ç»­
        """

    def load(self) -> List[Document]:
        """åŠ è½½ç½‘é¡µ"""</code></pre>
                    </div>

                    <h4>ä½¿ç”¨ç¤ºä¾‹</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import WebBaseLoader

# åŠ è½½å•ä¸ªç½‘é¡µ
loader = WebBaseLoader("https://example.com")
document = loader.load()

# åŠ è½½å¤šä¸ªç½‘é¡µ
urls = [
    "https://example.com/page1",
    "https://example.com/page2"
]
loader = WebBaseLoader(urls)
documents = loader.load()

# è‡ªå®šä¹‰è¯·æ±‚å¤´
loader = WebBaseLoader(
    "https://example.com",
    header_template={
        "User-Agent": "Mozilla/5.0",
        "Authorization": "Bearer token"
    }
)

# ä½¿ç”¨ BeautifulSoup é€‰æ‹©å™¨
from bs4 import SoupStrainer

loader = WebBaseLoader(
    "https://example.com",
    bs_kwargs={
        "parse_only": SoupStrainer(["p", "h1", "h2"])
    }
)</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">DirectoryLoader</h3>
                    <p class="api-description">åŠ è½½ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain_community.document_loaders import DirectoryLoader

class DirectoryLoader(BaseLoader):
    """ç›®å½•åŠ è½½å™¨"""

    def __init__(
        self,
        path: str,
        glob: str = "**/[!.]*",
        silent_errors: bool = False,
        load_hidden: bool = False,
        loader_cls: LoaderType = TextLoader,
        loader_kwargs: Optional[Dict[str, Any]] = None,
        recursive: bool = False,
        show_progress: bool = False,
        use_multithreading: bool = False,
        max_concurrency: int = 4,
    ):
        """
        åˆå§‹åŒ–

        Args:
            path: ç›®å½•è·¯å¾„
            glob: æ–‡ä»¶åŒ¹é…æ¨¡å¼
            silent_errors: æ˜¯å¦å¿½ç•¥é”™è¯¯
            load_hidden: æ˜¯å¦åŠ è½½éšè—æ–‡ä»¶
            loader_cls: ä½¿ç”¨çš„åŠ è½½å™¨ç±»
            loader_kwargs: ä¼ é€’ç»™åŠ è½½å™¨çš„å‚æ•°
            recursive: æ˜¯å¦é€’å½’åŠ è½½
            show_progress: æ˜¯å¦æ˜¾ç¤ºè¿›åº¦
            use_multithreading: æ˜¯å¦ä½¿ç”¨å¤šçº¿ç¨‹
            max_concurrency: æœ€å¤§å¹¶å‘æ•°
        """

    def load(self) -> List[Document]:
        """åŠ è½½ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶"""</code></pre>
                    </div>

                    <h4>ä½¿ç”¨ç¤ºä¾‹</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import DirectoryLoader, TextLoader

# åŠ è½½æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶
loader = DirectoryLoader(
    "./data",
    glob="**/*.txt",
    loader_cls=TextLoader
)
documents = loader.load()

# åŠ è½½ PDF æ–‡ä»¶
from langchain_community.document_loaders import PyPDFLoader

loader = DirectoryLoader(
    "./documents",
    glob="**/*.pdf",
    loader_cls=PyPDFLoader
)

# é€’å½’åŠ è½½
loader = DirectoryLoader(
    "./data",
    glob="**/*.txt",
    recursive=True
)

# ä½¿ç”¨å¤šçº¿ç¨‹
loader = DirectoryLoader(
    "./data",
    glob="**/*.txt",
    use_multithreading=True,
    max_concurrency=8,
    show_progress=True
)</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">JSONLoader</h3>
                    <p class="api-description">åŠ è½½ JSON æ–‡ä»¶ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain_community.document_loaders import JSONLoader

class JSONLoader(BaseLoader):
    """JSON æ–‡ä»¶åŠ è½½å™¨"""

    def __init__(
        self,
        file_path: str,
        jq_schema: Optional[str] = None,
        content_key: Optional[str] = None,
        metadata_func: Optional[Callable[[Dict, Dict], Dict]] = None,
        text_content: bool = True,
        json_lines: bool = false,
    ):
        """
        åˆå§‹åŒ–

        Args:
            file_path: JSON æ–‡ä»¶è·¯å¾„
            jq_schema: jq è¡¨è¾¾å¼ï¼ˆç”¨äºé€‰æ‹©æ•°æ®ï¼‰
            content_key: å†…å®¹å­—æ®µå
            metadata_func: å…ƒæ•°æ®ç”Ÿæˆå‡½æ•°
            text_content: æ˜¯å¦æå–æ–‡æœ¬å†…å®¹
            json_lines: æ˜¯å¦ä¸º JSON Lines æ ¼å¼
        """

    def load(self) -> List[Document]:
        """åŠ è½½ JSON æ–‡ä»¶"""</code></pre>
                    </div>

                    <h4>ä½¿ç”¨ç¤ºä¾‹</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import JSONLoader

# åŠ è½½ JSON æ•°ç»„
loader = JSONLoader(
    file_path="data.json",
    jq_schema=".[]",  # å±•å¼€æ•°ç»„
    text_content=False  # ä¿ç•™ JSON ç»“æ„
)

# æå–ç‰¹å®šå­—æ®µ
loader = JSONLoader(
    file_path="data.json",
    jq_schema=".[] | {title, content}",
    content_key="content"
)

# è‡ªå®šä¹‰å…ƒæ•°æ®
def metadata_func(record: dict, metadata: dict) -> dict:
    metadata["title"] = record.get("title")
    metadata["date"] = record.get("date")
    return metadata

loader = JSONLoader(
    file_path="data.json",
    jq_schema=".[]",
    metadata_func=metadata_func
)</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">å…¶ä»–å¸¸ç”¨åŠ è½½å™¨</h3>

                    <h4>CSVLoader</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import CSVLoader

loader = CSVLoader(
    file_path="data.csv",
    csv_args={
        "delimiter": ",",
        "quotechar": '"',
        "fieldnames": ["col1", "col2", "col3"]
    }
)</code></pre>
                    </div>

                    <h4>MarkdownLoader</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import UnstructuredMarkdownLoader

loader = UnstructuredMarkdownLoader("README.md")</code></pre>
                    </div>

                    <h4>YouTubeLoader</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_community.document_loaders import YoutubeLoader

loader = YoutubeLoader.from_youtube_url(
    "https://www.youtube.com/watch?v=xxx",
    add_video_info=True,
    language=["en", "zh"],
    translation="en"
)</code></pre>
                    </div>
                </div>

                <h2 id="examples">ä½¿ç”¨ç¤ºä¾‹</h2>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">python</span>
                        <button class="copy-btn">å¤åˆ¶</button>
                    </div>
                    <pre><code class="language-python"># ========== ç¤ºä¾‹1: åŠ è½½æ–‡æœ¬æ–‡ä»¶ ==========
from langchain_community.document_loaders import TextLoader

loader = TextLoader("example.txt")
docs = loader.load()

print(f"å†…å®¹: {docs[0].page_content}")
print(f"å…ƒæ•°æ®: {docs[0].metadata}")

# ========== ç¤ºä¾‹2: åŠ è½½ PDF ==========
from langchain_community.document_loaders import PyPDFLoader

loader = PyPDFLoader("document.pdf")
pages = loader.load()

for i, page in enumerate(pages):
    print(f"é¡µç : {page.metadata.get('page')}")
    print(f"å†…å®¹: {page.page_content[:100]}")

# ========== ç¤ºä¾‹3: åŠ è½½ç›®å½• ==========
from langchain_community.document_loaders import DirectoryLoader

loader = DirectoryLoader(
    "./documents",
    glob="**/*.txt",
    show_progress=True
)
docs = loader.load()

# ========== ç¤ºä¾‹4: åŠ è½½å¹¶åˆ†å‰² ==========
from langchain_text_splitters import RecursiveCharacterTextSplitter

loader = TextLoader("large_document.txt")
docs = loader.load_and_split(
    text_splitter=RecursiveCharacterTextSplitter(
        chunk_size=1000,
        chunk_overlap=200
    )
)

# ========== ç¤ºä¾‹5: åŠ è½½ç½‘é¡µ ==========
from langchain_community.document_loaders import WebBaseLoader

urls = [
    "https://example.com/article1",
    "https://example.com/article2"
]
loader = WebBaseLoader(urls)
docs = loader.load()

# ========== ç¤ºä¾‹6: å¼‚æ­¥åŠ è½½ ==========
import asyncio

async def load_documents():
    loader = TextLoader("example.txt")
    docs = await loader.aload()
    return docs

docs = asyncio.run(load_documents())

# ========== ç¤ºä¾‹7: æ‡’åŠ è½½ï¼ˆå¤§æ–‡ä»¶ï¼‰==========
def process_large_file():
    loader = TextLoader("huge_file.txt")
    for doc in loader.lazy_load():
        # é€å—å¤„ç†
        process_chunk(doc.page_content)

# ========== ç¤ºä¾‹8: è‡ªå®šä¹‰åŠ è½½å™¨ ==========
from langchain_core.document_loaders import BaseLoader

class CustomLoader(BaseLoader):
    def __init__(self, source: str):
        self.source = source

    def load(self) -> List[Document]:
        # è‡ªå®šä¹‰åŠ è½½é€»è¾‘
        with open(self.source) as f:
            content = f.read()
        return [
            Document(
                page_content=content,
                metadata={"source": self.source}
            )
        ]

loader = CustomLoader("custom.dat")
docs = loader.load()</code></pre>
                </div>

                <h2>ç›¸å…³ API</h2>
                <ul>
                    <li><a href="text-splitters.html">Text Splitters API</a></li>
                    <li><a href="../07-document-loaders.html">æ•™ç¨‹ï¼šæ–‡æ¡£åŠ è½½</a></li>
                </ul>

                <div class="chapter-nav">
                    <a href="tools.html">â† Tools API</a>
                    <a href="text-splitters.html" class="next">Text Splitters API â†’</a>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="../assets/js/main.js"></script>
</body>
</html>
