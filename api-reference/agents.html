<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½ä½“ API - LangChain 1.0</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="chapter-api-agents">
    <button class="theme-toggle">ğŸŒ“</button>
    <button class="mobile-menu-btn" onclick="toggleSidebar()">â˜°</button>

    <div class="app-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>LangChain 1.0</h1>
                <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 5px;">API å‚è€ƒ</p>
            </div>
            <div class="sidebar-nav"></div>
        </nav>

        <main class="main-content">
            <div class="content">
                <h1>æ™ºèƒ½ä½“ API</h1>
                <p class="subtitle">Agent åˆ›å»ºä¸æ‰§è¡Œ</p>

                <div class="api-nav">
                    <a href="#overview" class="api-nav-link">æ¦‚è¿°</a>
                    <a href="#functions" class="api-nav-link">åˆ›å»ºå‡½æ•°</a>
                    <a href="#executor" class="api-nav-link">æ‰§è¡Œå™¨</a>
                    <a href="#types" class="api-nav-link">Agent ç±»å‹</a>
                    <a href="#examples" class="api-nav-link">ç¤ºä¾‹</a>
                </div>

                <h2 id="overview">æ¦‚è¿°</h2>
                <p>LangChain çš„æ™ºèƒ½ä½“ç³»ç»Ÿä½¿ç”¨ LLM å†³å®šè°ƒç”¨å“ªäº›å·¥å…·æ¥å®Œæˆä»»åŠ¡ã€‚æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ Agentï¼ˆå†³ç­–ï¼‰å’Œ AgentExecutorï¼ˆæ‰§è¡Œï¼‰ã€‚</p>

                <pre class="mermaid">graph TD
                    A[ç”¨æˆ·è¾“å…¥] --> B[Agent]
                    B --> C{å†³ç­–}
                    C -->|éœ€è¦å·¥å…·| D[è°ƒç”¨å·¥å…·]
                    C -->|å®Œæˆ| E[è¿”å›ç»“æœ]
                    D --> F[è·å–å·¥å…·ç»“æœ]
                    F --> B
                    B --> G[è§‚å¯Ÿç»“æœ]
                    G --> C

                    style B fill:#e1f5fe
                    style D fill:#c8e6c9</code></pre>

                <h2 id="functions">åˆ›å»ºå‡½æ•°</h2>

                <div class="api-section">
                    <h3 class="api-title">create_tool_calling_agent</h3>
                    <p class="api-description">åˆ›å»ºå·¥å…·è°ƒç”¨ç±»å‹çš„ Agentï¼ˆæ¨èï¼‰ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import create_tool_calling_agent
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.language_models import BaseChatModel
from langchain_core.tools import BaseTool

def create_tool_calling_agent(
    llm: BaseChatModel,
    tools: Sequence[Union[BaseTool, StructuredTool, callable]],
    prompt: ChatPromptTemplate,
    *,
    tool_names: Optional[List[str]] = None,
    strict: bool = False,
) -> Runnable:
    """
    åˆ›å»ºå·¥å…·è°ƒç”¨ Agent

    Args:
        llm: èŠå¤©æ¨¡å‹ï¼ˆéœ€è¦æ”¯æŒå·¥å…·è°ƒç”¨ï¼‰
        tools: å·¥å…·åˆ—è¡¨
        prompt: Agent æç¤ºæ¨¡æ¿
        tool_names: å¯é€‰çš„å·¥å…·åç§°è¿‡æ»¤
        strict: æ˜¯å¦ä¸¥æ ¼æ¨¡å¼ï¼ˆåªä½¿ç”¨æä¾›çš„å·¥å…·ï¼‰

    Returns:
        å¯è¿è¡Œçš„ Agent

    Example:
        from langchain_openai import ChatOpenAI
        from langchain_core.tools import tool
        from langchain.agents import AgentExecutor

        @tool
        def search(query: str) -> str:
            return "æœç´¢ç»“æœ"

        llm = ChatOpenAI(model="gpt-4o")
        prompt = ChatPromptTemplate.from_messages([
            ("system", "You are a helpful assistant"),
            ("placeholder", "{chat_history}"),
            ("human", "{input}"),
            ("placeholder", "{agent_scratchpad}"),
        ])

        agent = create_tool_calling_agent(llm, [search], prompt)
        agent_executor = AgentExecutor(
            agent=agent,
            tools=[search],
            verbose=True
        )
        result = agent_executor.invoke({"input": "æœç´¢ Python"})
    """</code></pre>
                    </div>

                    <h4>æç¤ºæ¨¡æ¿è¦æ±‚</h4>
                    <p>æç¤ºæ¨¡æ¿å¿…é¡»åŒ…å«ä»¥ä¸‹å ä½ç¬¦ï¼š</p>
                    <ul>
                        <li><code>{chat_history}</code> - å¯¹è¯å†å²ï¼ˆå¯é€‰ï¼‰</li>
                        <li><code>{input}</code> - ç”¨æˆ·è¾“å…¥</li>
                        <li><code>{agent_scratchpad}</code> - Agent æ€è€ƒè¿‡ç¨‹ï¼ˆå¿…éœ€ï¼‰</li>
                    </ul>
                </div>

                <div class="api-section">
                    <h3 class="api-title">create_react_agent</h3>
                    <p class="api-description">åˆ›å»º ReAct ç±»å‹çš„ Agentï¼ˆæ¨ç† + è¡ŒåŠ¨ï¼‰ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import create_react_agent

def create_react_agent(
    llm: BaseLanguageModel,
    tools: Sequence[BaseTool],
    prompt: PromptTemplate,
) -> Runnable:
    """
    åˆ›å»º ReAct Agent

    Args:
        llm: è¯­è¨€æ¨¡å‹
        tools: å·¥å…·åˆ—è¡¨
        prompt: æç¤ºæ¨¡æ¿ï¼ˆéœ€åŒ…å«ç‰¹å®šæ ¼å¼ï¼‰

    Returns:
        ReAct Agent

    Note:
        ReAct Agent ä½¿ç”¨ Thought-Action-Observation å¾ªç¯
    """</code></pre>
                    </div>

                    <h4>ReAct æç¤ºæ ¼å¼</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain_core.prompts import PromptTemplate

template = """Answer the following questions as best you can.
You have access to the following tools:

{tools}

Use the following format:

Question: the input question you must answer
Thought: you should always think about what to do
Action: the action to take, should be one of [{tool_names}]
Action Input: the input to the action
Observation: the result of the action
... (this Thought/Action/Action Input/Observation can repeat N times)
Thought: I now know the final answer
Final Answer: the final answer to the original input question

Begin!

Question: {input}
Thought: {agent_scratchpad}"""

prompt = PromptTemplate.from_template(template)</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">create_structured_chat_agent</h3>
                    <p class="api-description">åˆ›å»ºç»“æ„åŒ–èŠå¤© Agentã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import create_structured_chat_agent

def create_structured_chat_agent(
    llm: BaseLanguageModel,
    tools: Sequence[BaseTool],
    prompt: ChatPromptTemplate,
) -> Runnable:
    """
    åˆ›å»ºç»“æ„åŒ–èŠå¤© Agent

    Args:
        llm: è¯­è¨€æ¨¡å‹
        tools: å·¥å…·åˆ—è¡¨
        prompt: èŠå¤©æç¤ºæ¨¡æ¿

    Returns:
        ç»“æ„åŒ–èŠå¤© Agent
    """</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">create_json_agent</h3>
                    <p class="api-description">åˆ›å»º JSON æ ¼å¼çš„ Agentã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import create_json_agent

def create_json_agent(
    llm: BaseLanguageModel,
    tools: Sequence[BaseTool],
    prompt: PromptTemplate,
    *,
    stop_sequence: List[str] = ["\nObservation:"],
) -> Runnable:
    """
    åˆ›å»º JSON Agent

    Args:
        llm: è¯­è¨€æ¨¡å‹
        tools: å·¥å…·åˆ—è¡¨
        prompt: æç¤ºæ¨¡æ¿
        stop_sequence: åœæ­¢åºåˆ—

    Returns:
        JSON Agent
    """</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">create_openai_functions_agent</h3>
                    <p class="api-description">åˆ›å»º OpenAI Functions ç±»å‹çš„ Agentï¼ˆå·²å¼ƒç”¨ï¼Œä½¿ç”¨ create_tool_calling_agentï¼‰ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import create_openai_functions_agent

def create_openai_functions_agent(
    llm: BaseChatModel,
    tools: Sequence[BaseTool],
    prompt: ChatPromptTemplate,
) -> Runnable:
    """
    åˆ›å»º OpenAI Functions Agent

    Note: å·²è¢« create_tool_calling_agent å–ä»£
    """</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">create_openai_tools_agent</h3>
                    <p class="api-description">åˆ›å»º OpenAI Tools ç±»å‹çš„ Agentï¼ˆå·²å¼ƒç”¨ï¼‰ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import create_openai_tools_agent

def create_openai_tools_agent(
    llm: BaseChatModel,
    tools: Sequence[BaseTool],
    prompt: ChatPromptTemplate,
) -> Runnable:
    """
    åˆ›å»º OpenAI Tools Agent

    Note: å·²è¢« create_tool_calling_agent å–ä»£
    """</code></pre>
                    </div>
                </div>

                <h2 id="executor">æ‰§è¡Œå™¨</h2>

                <div class="api-section" id="agentexecutor">
                    <h3 class="api-title">AgentExecutor</h3>
                    <p class="api-description">Agent æ‰§è¡Œå™¨ï¼Œè´Ÿè´£è¿è¡Œ Agent å¾ªç¯ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import AgentExecutor

class AgentExecutor(Runnable[AgentInput, AgentOutput]):
    """Agent æ‰§è¡Œå™¨"""

    agent: Runnable[AgentInput, AgentActionOrFinish]
    """Agent Runnable"""

    tools: Dict[str, BaseTool]
    """å·¥å…·å­—å…¸"""

    max_iterations: int = 15
    """æœ€å¤§è¿­ä»£æ¬¡æ•°"""

    max_execution_time: Optional[float] = None
    """æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰"""

    early_stopping_method: Literal["force", "generate"] = "force"
    """æå‰åœæ­¢æ–¹æ³•"""

    verbose: bool = False
    """æ˜¯å¦æ‰“å°è¯¦ç»†æ—¥å¿—"""

    return_intermediate_steps: bool = False
    """æ˜¯å¦è¿”å›ä¸­é—´æ­¥éª¤"""

    handle_parsing_errors: Union[bool, str, Callable[[Exception], str]] = True
    """é”™è¯¯å¤„ç†ç­–ç•¥"""

    callback_manager: Optional[CallbackManager] = None
    """å›è°ƒç®¡ç†å™¨"""

    # æ„é€ æ–¹æ³•
    def __init__(
        self,
        agent: Runnable[AgentInput, AgentActionOrFinish],
        tools: Sequence[BaseTool],
        *,
        max_iterations: int = 15,
        max_execution_time: Optional[float] = None,
        early_stopping_method: str = "force",
        verbose: bool = False,
        return_intermediate_steps: bool = False,
        handle_parsing_errors: Union[bool, str, Callable] = True,
        **kwargs: Any,
    ):
        """
        åˆå§‹åŒ–æ‰§è¡Œå™¨

        Args:
            agent: Agent Runnable
            tools: å·¥å…·åˆ—è¡¨
            max_iterations: æœ€å¤§è¿­ä»£æ¬¡æ•°
            max_execution_time: æœ€å¤§æ‰§è¡Œæ—¶é—´
            early_stopping_method: åœæ­¢æ–¹æ³• ("force" æˆ– "generate")
            verbose: è¯¦ç»†æ—¥å¿—
            return_intermediate_steps: è¿”å›ä¸­é—´æ­¥éª¤
            handle_parsing_errors: é”™è¯¯å¤„ç†
        """</code></pre>
                    </div>

                    <h4>æ ¸å¿ƒæ–¹æ³•</h4>
                    <div class="api-signature">
                        <pre><code class="language-python">def invoke(
    self,
    input: AgentInput,
    config: Optional[RunnableConfig] = None,
    **kwargs: Any,
) -> AgentOutput:
    """
    æ‰§è¡Œ Agent

    Args:
        input: è¾“å…¥å­—å…¸
        config: è¿è¡Œé…ç½®
        **kwargs: é¢å¤–å‚æ•°

    Returns:
        è¾“å‡ºå­—å…¸ï¼ŒåŒ…å«:
        - output: æœ€ç»ˆè¾“å‡º
        - intermediate_steps: ä¸­é—´æ­¥éª¤ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    """

def stream(
    self,
    input: AgentInput,
    config: Optional[RunnableConfig] = None,
    **kwargs: Any,
) -> Iterator[AgentOutput]:
    """æµå¼æ‰§è¡Œ"""

async def ainvoke(
    self,
    input: AgentInput,
    config: Optional[RunnableConfig] = None,
    **kwargs: Any,
) -> AgentOutput:
    """å¼‚æ­¥æ‰§è¡Œ"""</code></pre>
                    </div>

                    <h4>ä½¿ç”¨ç¤ºä¾‹</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-language">python</span>
                            <button class="copy-btn">å¤åˆ¶</button>
                        </div>
                        <pre><code class="language-python">from langchain.agents import create_tool_calling_agent, AgentExecutor
from langchain_openai import ChatOpenAI
from langchain_core.tools import tool
from langchain_core.prompts import ChatPromptTemplate

@tool
def search(query: str) -> str:
    """æœç´¢ç½‘ç»œ"""
    return f"å…³äº {query} çš„æœç´¢ç»“æœ"

@tool
def calculator(expression: str) -> str:
    """è®¡ç®—æ•°å­¦è¡¨è¾¾å¼"""
    try:
        return str(eval(expression))
    except:
        return "è®¡ç®—é”™è¯¯"

# åˆ›å»º Agent
llm = ChatOpenAI(model="gpt-4o")
tools = [search, calculator]

prompt = ChatPromptTemplate.from_messages([
    ("system", "ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹"),
    ("placeholder", "{chat_history}"),
    ("human", "{input}"),
    ("placeholder", "{agent_scratchpad}"),
])

agent = create_tool_calling_agent(llm, tools, prompt)

# åˆ›å»ºæ‰§è¡Œå™¨
agent_executor = AgentExecutor(
    agent=agent,
    tools=tools,
    verbose=True,
    max_iterations=10,
    return_intermediate_steps=True
)

# æ‰§è¡Œ
result = agent_executor.invoke({"input": "æœç´¢ Python å¹¶è®¡ç®— 2+3"})
print(result["output"])
print(result["intermediate_steps"])</code></pre>
                    </div>
                </div>

                <h2 id="types">Agent ç±»å‹</h2>

                <div class="api-section">
                    <h3 class="api-title">AgentType æšä¸¾</h3>
                    <p class="api-description">é¢„å®šä¹‰çš„ Agent ç±»å‹ï¼ˆéƒ¨åˆ†å·²å¼ƒç”¨ï¼‰ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import AgentType

class AgentType(Enum):
    """Agent ç±»å‹æšä¸¾"""

    ZERO_SHOT_REACT_DESCRIPTION = "zero-shot-react-description"
    """é›¶æ ·æœ¬ ReAct Agent"""

    REACT_DOCSTORE = "react-docstore"
    """æ–‡æ¡£å­˜å‚¨ ReAct Agent"""

    SELF_ASK_WITH_SEARCH = "self-ask-with-search"
    """è‡ªé—®æœç´¢ Agent"""

    CONVERSATIONAL_REACT_DESCRIPTION = "conversational-react-description"
    """å¯¹è¯ ReAct Agent"""

    CHAT_ZERO_SHOT_REACT_DESCRIPTION = "chat-zero-shot-react-description"
    """èŠå¤©é›¶æ ·æœ¬ ReAct Agent"""

    CHAT_CONVERSATIONAL_REACT_DESCRIPTION = "chat-conversational-react-description"
    """èŠå¤©å¯¹è¯ ReAct Agent"""

    STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION = "structured-chat-zero-shot-react-description"
    """ç»“æ„åŒ–èŠå¤©é›¶æ ·æœ¬ ReAct Agent"""

    OPENAI_FUNCTIONS = "openai-functions"
    """OpenAI Functions Agentï¼ˆå·²å¼ƒç”¨ï¼‰"""

    OPENAI_MULTI_FUNCTIONS = "openai-multi-functions"
    """OpenAI å¤šå‡½æ•° Agentï¼ˆå·²å¼ƒç”¨ï¼‰"""</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">AgentAction</h3>
                    <p class="api-description">Agent æ‰§è¡Œçš„åŠ¨ä½œã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import AgentAction

class AgentAction(Serializable):
    """Agent åŠ¨ä½œ"""

    tool: str
    """è¦è°ƒç”¨çš„å·¥å…·åç§°"""

    tool_input: Union[str, dict]
    """å·¥å…·è¾“å…¥"""

    log: str
    """æ‰§è¡Œæ—¥å¿—"""

    def __init__(
        self,
        tool: str,
        tool_input: Union[str, dict],
        log: str,
    ):
        """
        Args:
            tool: å·¥å…·åç§°
            tool_input: å·¥å…·è¾“å…¥
            log: æ—¥å¿—
        """</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">AgentFinish</h3>
                    <p class="api-description">Agent å®ŒæˆçŠ¶æ€ã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from langchain.agents import AgentFinish

class AgentFinish(Serializable):
    """Agent å®Œæˆ"""

    return_values: dict
    """è¿”å›å€¼å­—å…¸"""

    log: str
    """å®Œæˆæ—¥å¿—"""

    def __init__(
        self,
        return_values: dict,
        log: str,
    ):
        """
        Args:
            return_values: è¿”å›å€¼ï¼ˆé€šå¸¸åŒ…å« "output" é”®ï¼‰
            log: æ—¥å¿—
        """</code></pre>
                    </div>
                </div>

                <div class="api-section">
                    <h3 class="api-title">AgentStep</h3>
                    <p class="api-description">å•æ­¥æ‰§è¡Œç»“æœã€‚</p>

                    <div class="api-signature">
                        <pre><code class="language-python">from typing import Tuple, Union
from langchain.agents import AgentAction, AgentFinish

AgentStep = Tuple[AgentAction, str]
"""Agent æ­¥éª¤: (åŠ¨ä½œ, è§‚å¯Ÿç»“æœ)"""</code></pre>
                    </div>
                </div>

                <h2 id="examples">ä½¿ç”¨ç¤ºä¾‹</h2>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">python</span>
                        <button class="copy-btn">å¤åˆ¶</button>
                    </div>
                    <pre><code class="language-python">from langchain.agents import create_tool_calling_agent, AgentExecutor
from langchain_openai import ChatOpenAI
from langchain_core.tools import tool
from langchain_core.prompts import ChatPromptTemplate

# ========== ç¤ºä¾‹1: åŸºç¡€å·¥å…·è°ƒç”¨ Agent ==========

@tool
def get_weather(city: str) -> str:
    """è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”"""
    return f"{city} ä»Šå¤©æ˜¯æ™´å¤©ï¼Œæ¸©åº¦ 25Â°C"

@tool
def get_time(city: str) -> str:
    """è·å–æŒ‡å®šåŸå¸‚çš„æ—¶é—´"""
    from datetime import datetime
    return f"{city} ç°åœ¨æ˜¯ {datetime.now().strftime('%H:%M')}"

llm = ChatOpenAI(model="gpt-4o")
tools = [get_weather, get_time]

prompt = ChatPromptTemplate.from_messages([
    ("system", "ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹"),
    ("human", "{input}"),
    ("placeholder", "{agent_scratchpad}"),
])

agent = create_tool_calling_agent(llm, tools, prompt)
agent_executor = AgentExecutor(agent=agent, tools=tools, verbose=True)

result = agent_executor.invoke({"input": "åŒ—äº¬çš„å¤©æ°”å’Œæ—¶é—´"})

# ========== ç¤ºä¾‹2: å¸¦å¯¹è¯å†å²çš„ Agent ==========

prompt_with_history = ChatPromptTemplate.from_messages([
    ("system", "ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹"),
    ("placeholder", "{chat_history}"),
    ("human", "{input}"),
    ("placeholder", "{agent_scratchpad}"),
])

agent_executor_history = AgentExecutor(
    agent=create_tool_calling_agent(llm, tools, prompt_with_history),
    tools=tools
)

from langchain_core.messages import HumanMessage, AIMessage

chat_history = [
    HumanMessage(content="ä½ å¥½"),
    AIMessage(content="ä½ å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„ï¼Ÿ")
]

result = agent_executor_history.invoke({
    "input": "åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ",
    "chat_history": chat_history
})

# ========== ç¤ºä¾‹3: æµå¼æ‰§è¡Œ ==========

async def stream_agent():
    async for chunk in agent_executor.astream({"input": "åŒ—äº¬å¤©æ°”"}):
        print(chunk)

import asyncio
asyncio.run(stream_agent())

# ========== ç¤ºä¾‹4: è‡ªå®šä¹‰é”™è¯¯å¤„ç† ==========

def handle_error(error: Exception) -> str:
    return f"å‘ç”Ÿé”™è¯¯: {str(error)}ã€‚è¯·å°è¯•é‡æ–°è¡¨è¿°ä½ çš„é—®é¢˜ã€‚"

agent_executor_safe = AgentExecutor(
    agent=agent,
    tools=tools,
    handle_parsing_errors=handle_error
)

# ========== ç¤ºä¾‹5: é™åˆ¶è¿­ä»£æ¬¡æ•° ==========

agent_executor_limited = AgentExecutor(
    agent=agent,
    tools=tools,
    max_iterations=5
)

# ========== ç¤ºä¾‹6: è·å–ä¸­é—´æ­¥éª¤ ==========

agent_executor_debug = AgentExecutor(
    agent=agent,
    tools=tools,
    return_intermediate_steps=True,
    verbose=True
)

result = agent_executor_debug.invoke({"input": "åŒ—äº¬å¤©æ°”"})
print("ä¸­é—´æ­¥éª¤:", result["intermediate_steps"])</code></pre>
                </div>

                <h2>ç›¸å…³ API</h2>
                <ul>
                    <li><a href="tools.html">Tools API</a></li>
                    <li><a href="chat-models.html">Chat Models API</a></li>
                    <li><a href="../06-agents.html">æ•™ç¨‹ï¼šæ™ºèƒ½ä½“</a></li>
                </ul>

                <div class="chapter-nav">
                    <a href="runnables.html">â† Runnables API</a>
                    <a href="tools.html" class="next">Tools API â†’</a>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="../assets/js/main.js"></script>
</body>
</html>
